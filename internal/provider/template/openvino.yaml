version: "0.2"
name: openvino # the name should be aligned with file name
services:
    text_to_image:
        protocol: "GRPC"
        url: "127.0.0.1:9000"
        endpoints: [""]
        extra_url: ""
        auth_type: ""
        install_raw_routes: # also install routes without aog prefix in url path
        default_model: "stable-diffusion-v-1-5-ov-fp16"
        request_segments: 1 # request
        extra_headers: ""
        request_to_aog:
            conversion:
                - converter: jsonata
                  config: |
                      {
                         "model": $model,
                         "prompt": prompt 
                      }

                - converter: header
                  config:
                      set:
                          Content-Type: application/json
        request_from_aog:
            conversion:
                - converter: jsonata
                  config: |
                      {
                         "model": $model,
                         "prompt": prompt 
                      }

                - converter: header
                  config:
                      set:
                          Content-Type: application/json
        response_to_aog:
            conversion:
                - converter: jsonata
                  config: |
                      {
                          "data": {
                              "url": local_path
                                  }
                      }
        response_from_aog:
            conversion:
                - converter: jsonata
                  config: |
                      {
                           "id": request_id,
                           "data": {
                              "url": output.results[0].url
                                  }
                      }
